{"version":3,"file":"index.js","mappings":"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","sources":["webpack://MultiIndexMap/webpack/universalModuleDefinition","webpack://MultiIndexMap/webpack/bootstrap","webpack://MultiIndexMap/webpack/runtime/define property getters","webpack://MultiIndexMap/webpack/runtime/hasOwnProperty shorthand","webpack://MultiIndexMap/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"MultiIndexMap\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MultiIndexMap\"] = factory();\n\telse\n\t\troot[\"MultiIndexMap\"] = factory();\n})(this, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","\ntype IndexName = string;\ntype Value = any;\ntype Item = { [I: IndexName]: any };\ntype NonPrimeToPrimeIndexValuesMap =  Map<Value, Value>;\n\nconst ERRORS = {\n  ITEM_NOT_OBJECT: \"MultiIndexMap: cannot add item as it is not an object\",\n  INDEXED_PROPERTY_NOT_FOUND_IN_ITEM: \"MultiIndexMap: cannot add as an indexed property is not found in item\",\n  INDEXNAMES_EMPTY: \"MultiIndexMap: index names cannot be empty or undefined\",\n  INDEXED_VALUES_NOT_UNIQUE: \"MultiIndexMap: indexed prop values should be unique\",\n}\n\nclass MultiIndexMap {\n  private primeIndexItemMap: Map<IndexName, Item>;\n  private nonPrimeIndexesMap: Map<IndexName, NonPrimeToPrimeIndexValuesMap>;\n  private primeIndex: IndexName;\n  private nonPrimeIndexes: Array<IndexName>;\n  private indexNames: Array<IndexName>;\n\n  constructor(indexNames: Array<IndexName>, items: Array<Item> = []) {\n    if (!indexNames?.length) throw new Error(ERRORS.INDEXNAMES_EMPTY);\n    this.indexNames = indexNames;\n    const [primeIndex, ...nonPrimeIndexes] = indexNames;\n    this.primeIndex = primeIndex;\n    this.nonPrimeIndexes = nonPrimeIndexes;\n    this.__initMaps();\n    items.forEach((item) => this.set(item));\n  }\n\n  private __initMaps() {\n    this.primeIndexItemMap = new Map();\n    this.nonPrimeIndexesMap = new Map(this.nonPrimeIndexes.map(indexName => [indexName, new Map()]));\n  }\n\n  get(indexName: IndexName, indexValue: any) : Item | undefined {\n    if (indexName === this.primeIndex) return this.primeIndexItemMap.get(indexValue);\n    return this.primeIndexItemMap.get(this.nonPrimeIndexesMap.get(indexName)?.get(indexValue));\n  }\n\n  set(item: Item) {\n    if (typeof item !== 'object') throw new Error(ERRORS.ITEM_NOT_OBJECT);\n    this.indexNames.forEach((key) => {\n      if (!item.hasOwnProperty(key)) throw new Error(ERRORS.INDEXED_PROPERTY_NOT_FOUND_IN_ITEM);\n      if (this.has(key, item[key])) throw new Error(ERRORS.INDEXED_VALUES_NOT_UNIQUE);\n    });\n    this.primeIndexItemMap.set(item[this.primeIndex], item);\n    this.nonPrimeIndexes.forEach((key) => {\n      this.nonPrimeIndexesMap.get(key)?.set(item[key], item[this.primeIndex]);\n    });\n  }\n\n  has(indexName: IndexName, indexValue: Value): boolean {\n    if (indexName === this.primeIndex) return this.primeIndexItemMap.has(indexValue);\n    return !!this.nonPrimeIndexesMap.get(indexName)?.has(indexValue);\n  }\n\n  delete(indexName: IndexName, indexValue: Value) {\n    const item = this.get(indexName, indexValue);\n    if (item) {\n      this.nonPrimeIndexes.forEach((key) => {\n        this.nonPrimeIndexesMap.get(key)?.delete(item[key]);\n      });\n      this.primeIndexItemMap.delete(item[this.primeIndex]);\n    }\n  }\n\n  keys(indexName: IndexName): IterableIterator<string> {\n    if (indexName === this.primeIndex) return this.primeIndexItemMap.keys();\n    return this.nonPrimeIndexesMap.get(indexName)?.keys();\n  }\n\n  values(): IterableIterator<Item> {\n    return this.primeIndexItemMap.values();\n  }\n\n  clear() {\n    this.__initMaps();\n  }\n\n  get size(): number {\n    return this.primeIndexItemMap.size;\n  }\n}\n\n\nexport default MultiIndexMap;"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","indexNames","items","length","Error","primeIndex","nonPrimeIndexes","__initMaps","forEach","item","set","MultiIndexMap","primeIndexItemMap","Map","nonPrimeIndexesMap","map","indexName","indexValue","_a","_this","has","delete","keys","values","size"],"sourceRoot":""}